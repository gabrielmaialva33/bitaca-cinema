<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Bitaca Play 3D - Explore o universo cultural de Cap√£o Bonito em uma experi√™ncia imersiva 3D">
    <meta name="keywords" content="3D, cinema, cultura, Cap√£o Bonito, Three.js, experi√™ncia interativa">

    <!-- Open Graph -->
    <meta property="og:title" content="Bitaca Play 3D - Universo Cultural Interativo">
    <meta property="og:description" content="Explore 3 mundos tem√°ticos: Patrim√¥nio, M√∫sica e Meio Ambiente">
    <meta property="og:type" content="website">
    <meta property="og:image" content="assets/images/og-play3d.png">

    <!-- Theme -->
    <meta name="theme-color" content="#C41E3A">

    <title>Bitaca Play 3D | Universo Cultural Interativo</title>

    <!-- Styles -->
    <link href="../frontend/assets/css/styles.css" rel="stylesheet">
    <link href="assets/css/play3d.css" rel="stylesheet">
    <link href="assets/css/avatar.css" rel="stylesheet">

    <!-- KeenIcons -->
    <link href="../frontend/assets/vendors/keenicons/styles.bundle.css" rel="stylesheet">

    <!-- Import Map para Three.js -->
    <script type="importmap">
        {
          "imports": {
            "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
            "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
          }
        }
    </script>
</head>
<body class="play3d-body">
    <!-- Loading Screen -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-content">
            <div class="bitaca-logo-3d">
                <svg viewBox="0 0 200 80" width="200" height="80">
                    <!-- Casinha -->
                    <polygon fill="#C41E3A" points="100,10 120,25 120,40 80,40 80,25" stroke="#0A0A0A" stroke-width="2"/>
                    <rect fill="#8B4513" height="12" width="8" x="90" y="28"/>
                    <rect fill="#8B4513" height="12" width="8" x="105" y="28"/>
                    <!-- Texto BITACA -->
                    <text fill="#C41E3A" font-family="Staatliches, sans-serif" font-size="28" font-weight="bold" x="40" y="65">BITACA</text>
                    <text fill="#0A0A0A" font-family="Pacifico, cursive" font-size="14" x="60" y="78">Play 3D</text>
                </svg>
            </div>
            <div class="loading-bar">
                <div class="loading-progress" id="loading-progress"></div>
            </div>
            <p class="loading-text" id="loading-text">Carregando experi√™ncia 3D...</p>
            <p class="loading-tip" id="loading-tip">üí° Use WASD ou setas para navegar</p>
        </div>
    </div>

    <!-- Main 3D Canvas -->
    <canvas id="play3d-canvas"></canvas>

    <!-- UI Overlay -->
    <div class="ui-overlay" id="ui-overlay">
        <!-- Header -->
        <header class="play3d-header">
            <div class="header-left">
                <button class="btn-icon" id="btn-menu" title="Menu">
                    <i class="ki-filled ki-burger-menu"></i>
                </button>
                <h1 class="play3d-title">
                    <i class="ki-filled ki-cube-3d"></i> Bitaca Play 3D
                </h1>
            </div>
            <div class="header-right">
                <button class="btn-icon" id="btn-help" title="Ajuda">
                    <i class="ki-filled ki-information-3"></i>
                </button>
                <button class="btn-icon" id="btn-fullscreen" title="Tela cheia">
                    <i class="ki-filled ki-maximize"></i>
                </button>
            </div>
        </header>

        <!-- World Selection HUD -->
        <div class="world-selector" id="world-selector">
            <h2 class="world-selector-title">
                <i class="ki-filled ki-compass"></i> Escolha seu Mundo
            </h2>
            <div class="world-cards">
                <!-- Patrim√¥nio -->
                <button class="world-card" data-world="patrimonio">
                    <div class="world-card-icon">
                        <i class="ki-filled ki-bank"></i>
                    </div>
                    <h3 class="world-card-title">Patrim√¥nio</h3>
                    <p class="world-card-desc">Mem√≥ria e hist√≥ria cultural</p>
                    <div class="world-card-badge">9 produ√ß√µes</div>
                </button>

                <!-- M√∫sica -->
                <button class="world-card" data-world="musica">
                    <div class="world-card-icon">
                        <i class="ki-filled ki-note-2"></i>
                    </div>
                    <h3 class="world-card-title">M√∫sica</h3>
                    <p class="world-card-desc">Sons e ritmos locais</p>
                    <div class="world-card-badge">8 produ√ß√µes</div>
                </button>

                <!-- Meio Ambiente -->
                <button class="world-card" data-world="ambiente">
                    <div class="world-card-icon">
                        <i class="ki-filled ki-tree"></i>
                    </div>
                    <h3 class="world-card-title">Meio Ambiente</h3>
                    <p class="world-card-desc">Natureza e sustentabilidade</p>
                    <div class="world-card-badge">7 produ√ß√µes</div>
                </button>
            </div>
            <p class="world-selector-hint">
                <i class="ki-filled ki-mouse-circle"></i> Click em um mundo para come√ßar
            </p>
        </div>

        <!-- Controls Info -->
        <div class="controls-info" id="controls-info">
            <div class="control-item">
                <kbd>W A S D</kbd> ou <kbd>‚Üë ‚Üê ‚Üì ‚Üí</kbd> <span>Mover</span>
            </div>
            <div class="control-item">
                <kbd>Mouse</kbd> <span>Olhar ao redor</span>
            </div>
            <div class="control-item">
                <kbd>E</kbd> <span>Interagir</span>
            </div>
            <div class="control-item">
                <kbd>ESC</kbd> <span>Menu</span>
            </div>
        </div>

        <!-- Derona Avatar Dialog -->
        <div class="derona-dialog" id="derona-dialog" style="display: none;">
            <div class="derona-avatar-container">
                <div class="derona-avatar" id="derona-avatar"></div>
            </div>
            <div class="derona-message-box">
                <div class="derona-name">
                    <i class="ki-filled ki-profile-circle"></i> Derona
                </div>
                <p class="derona-message" id="derona-message">
                    Ol√°! Sou a Derona, sua guia no universo Bitaca.
                    Posso te ajudar a explorar as produ√ß√µes culturais de Cap√£o Bonito!
                </p>
                <div class="derona-actions">
                    <button class="btn btn-primary btn-sm" id="btn-ask-derona">
                        <i class="ki-filled ki-message-text"></i> Conversar
                    </button>
                    <button class="btn btn-secondary btn-sm" id="btn-close-derona">
                        <i class="ki-filled ki-cross"></i> Fechar
                    </button>
                </div>
            </div>
        </div>

        <!-- Production Card (shown when user interacts with a film in 3D) -->
        <div class="production-card-3d" id="production-card" style="display: none;">
            <button class="production-card-close" id="btn-close-card">
                <i class="ki-filled ki-cross"></i>
            </button>
            <div class="production-card-content">
                <div class="production-card-thumbnail" id="card-thumbnail"></div>
                <h3 class="production-card-title" id="card-title"></h3>
                <p class="production-card-director" id="card-director"></p>
                <p class="production-card-sinopse" id="card-sinopse"></p>
                <div class="production-card-badges">
                    <span class="badge badge-status" id="card-status"></span>
                    <span class="badge badge-category" id="card-category"></span>
                </div>
                <div class="production-card-actions">
                    <button class="btn btn-primary" id="btn-watch">
                        <i class="ki-filled ki-play"></i> Assistir
                    </button>
                    <button class="btn btn-secondary" id="btn-more-info">
                        <i class="ki-filled ki-information-3"></i> Mais Info
                    </button>
                </div>
            </div>
        </div>

        <!-- Mini Map -->
        <div class="minimap" id="minimap">
            <canvas id="minimap-canvas" width="200" height="200"></canvas>
            <div class="minimap-label">Mapa</div>
        </div>
    </div>

    <!-- Menu Sidebar -->
    <div class="menu-sidebar" id="menu-sidebar">
        <div class="menu-header">
            <h3><i class="ki-filled ki-burger-menu"></i> Menu</h3>
            <button class="btn-icon" id="btn-close-menu">
                <i class="ki-filled ki-cross"></i>
            </button>
        </div>
        <div class="menu-content">
            <ul class="menu-list">
                <li>
                    <a href="#" id="menu-worlds">
                        <i class="ki-filled ki-compass"></i> Escolher Mundo
                    </a>
                </li>
                <li>
                    <a href="#" id="menu-catalog">
                        <i class="ki-filled ki-category"></i> Ver Cat√°logo
                    </a>
                </li>
                <li>
                    <a href="#" id="menu-derona">
                        <i class="ki-filled ki-profile-circle"></i> Chamar Derona
                    </a>
                </li>
                <li>
                    <a href="../frontend/" id="menu-2d">
                        <i class="ki-filled ki-monitor"></i> Modo 2D
                    </a>
                </li>
                <li>
                    <a href="../galeria-bitaca/" id="menu-galeria">
                        <i class="ki-filled ki-picture"></i> Galeria Bitaca
                    </a>
                </li>
                <li class="menu-divider"></li>
                <li>
                    <a href="#" id="menu-settings">
                        <i class="ki-filled ki-setting-2"></i> Configura√ß√µes
                    </a>
                </li>
                <li>
                    <a href="#" id="menu-help">
                        <i class="ki-filled ki-question"></i> Ajuda
                    </a>
                </li>
            </ul>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="assets/js/utils/api-client.js"></script>
    <script src="assets/js/utils/audio-manager.js"></script>
    <script src="assets/js/components/derona-avatar.js" type="module"></script>
    <script src="assets/js/components/portal.js" type="module"></script>
    <script src="assets/js/components/film-card-3d.js" type="module"></script>
    <script src="assets/js/scenes/patrimonio-world.js" type="module"></script>
    <script src="assets/js/scenes/musica-world.js" type="module"></script>
    <script src="assets/js/scenes/ambiente-world.js" type="module"></script>
    <script src="assets/js/main.js" type="module"></script>
</body>
</html>
